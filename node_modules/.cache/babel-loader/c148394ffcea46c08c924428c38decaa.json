{"ast":null,"code":"var _jsxFileName = \"/Users/jovana/Downloads/ErpProject/ERPFrontend/src/pages/Review/ReviewEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport productService from \"../../services/product.service\";\nimport reviewService from \"../../services/review.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ReviewEdit() {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const ratingRef = useRef(null);\n  const productRef = useRef(null);\n  const commentRef = useRef(null);\n  const [error, setError] = useState(false);\n  useEffect(() => {\n    const fetchData = async () => {\n      const productsData = await productService.getAll();\n      setProducts(productsData.data);\n      const response = await reviewService.get(id);\n      ratingRef.current.value = response.data.rating;\n      productRef.current.value = response.data.product.productId;\n      commentRef.current.value = response.data.comment;\n    };\n\n    fetchData();\n  }, []);\n  const {\n    id\n  } = useParams();\n\n  function save() {\n    const comment = commentRef.current.value;\n    const rating = ratingRef.current.value;\n    const product = products.find(x => x.productId === +productRef.current.value);\n\n    if (!comment || !rating || !product) {\n      setError(true);\n      return;\n    }\n\n    reviewService.update(id, {\n      product,\n      rating,\n      comment\n    }).then(data => {\n      console.log(\"Successfully updated\");\n      setError(false);\n      alert(\"Successfully updated\");\n    }).catch(err => {\n      console.log(err);\n      alert(err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Edit review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-50 m-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            ref: productRef,\n            className: \"form-control\",\n            children: products.map((p, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: p.productId,\n              children: p.name\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Rating\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            ref: ratingRef,\n            className: \"form-control\",\n            name: \"price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: commentRef,\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mt-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-primary\",\n            onClick: save,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 bg-danger text-center\",\n          children: \"All fields are required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ReviewEdit, \"Mrlf6h0xm1fetSK09xZqufsWyhI=\", false, function () {\n  return [useParams];\n});\n\n_c = ReviewEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReviewEdit\");","map":{"version":3,"names":["useEffect","useRef","useState","useParams","productService","reviewService","ReviewEdit","products","setProducts","ratingRef","productRef","commentRef","error","setError","fetchData","productsData","getAll","data","response","get","id","current","value","rating","product","productId","comment","save","find","x","update","then","console","log","alert","catch","err","map","p","idx","name"],"sources":["/Users/jovana/Downloads/ErpProject/ERPFrontend/src/pages/Review/ReviewEdit.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\r\nimport { useParams } from \"react-router-dom\";\r\nimport productService from \"../../services/product.service\";\r\nimport reviewService from \"../../services/review.service\";\r\n\r\nexport default function ReviewEdit() {\r\n\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const ratingRef = useRef(null);\r\n    const productRef = useRef(null);\r\n    const commentRef = useRef(null);\r\n\r\n    const [error, setError] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const productsData = await productService.getAll();\r\n            setProducts(productsData.data);\r\n\r\n            const response = await reviewService.get(id);\r\n            ratingRef.current.value = response.data.rating;\r\n            productRef.current.value = response.data.product.productId;\r\n            commentRef.current.value = response.data.comment;\r\n        }\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const {id} = useParams();\r\n\r\n    function save() {\r\n        \r\n        const comment = commentRef.current.value;\r\n        const rating = ratingRef.current.value;\r\n        const product = products.find(x => x.productId === +productRef.current.value);\r\n        \r\n        if (!comment || !rating || !product) {\r\n            setError(true);\r\n            return;\r\n        }\r\n\r\n        reviewService.update(id, {\r\n            product,\r\n            rating,\r\n            comment,\r\n        })\r\n        .then(data => {\r\n            console.log(\"Successfully updated\")\r\n            setError(false);\r\n            alert(\"Successfully updated\");\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            alert(err);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <h1>Edit review</h1>\r\n\r\n            <div className=\"w-50 m-auto\">\r\n                <form>\r\n                    <div className=\"form-group mt-2\">\r\n                        <label>Product</label>\r\n                        <select ref={productRef} className=\"form-control\">\r\n                            {products.map((p, idx) => (\r\n                                <option key={idx} value={p.productId}>{p.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group mt-2\">\r\n                        <label>Rating</label>\r\n                        <input type=\"number\" ref={ratingRef} className=\"form-control\" name=\"price\" />\r\n                    </div>\r\n\r\n                    <div className=\"form-group mt-2\">\r\n                        <label>Comment</label>\r\n                        <textarea ref={commentRef} className=\"form-control\"></textarea>\r\n                    </div>\r\n                   \r\n                    <div className=\"form-group mt-2\">\r\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={save}>Save</button>\r\n                    </div>\r\n\r\n                    {error && <div className=\"mt-2 bg-danger text-center\">All fields are required</div>}\r\n                </form>\r\n            </div>\r\n        </>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}